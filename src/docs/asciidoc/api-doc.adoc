= iSmartAccess API Guide
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc: left
:toclevels: 3
:sectlinks:

[introduction]
== Introduction
iSmartAccess RESTful webservice

[[overview]]
== Overview

[[overview-http-verbs]]
=== HTTP verbs
iSmartAccess tries to adhere as closely as possible to standard HTTP and REST conventions in its
use of HTTP verbs.
|===
| Verb | Usage

| `GET`
| Used to retrieve a resource

| `POST`
| Used to create a new resource

| `PUT`
| Used to update an existing resource, overwrites all fields

| `DELETE`
| Used to delete an existing resource
|===

[[overview-http-status-codes]]
=== HTTP status codes
iSmartAccess tries to adhere as closely as possible to standard HTTP and REST conventions in its
use of HTTP status codes.

|===
| Status code | Usage

| `200 OK`
| Standard response for successful HTTP requests. +
The actual response will depend on the request method used. +
In a GET request, the response will contain an entity corresponding to the requested resource. +
In a POST request, the response will contain an entity describing or containing the result of the action. +

| `201 Created`
| The request has been fulfilled and resulted in a new resource being created.

| `204 No Content`
| The server successfully processed the request, but is not returning any content.

| `400 Bad Request`
| The server cannot or will not process the request due to something that is perceived to be a client error (e.g., malformed request syntax, invalid request message framing, or deceptive request routing).

| `404 Not Found`
| The requested resource could not be found but may be available again in the future. Subsequent requests by the client are permissible.
| `405 Method Not Allowed`
| The type of request for this resource is not allowed. For example, some endpoints may be GET only.
Trying a POST will return this message.
|===
For more status codes, see the https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html[w3 standard]

[[overview-errors]]
=== Errors

Whenever an error response (status code >= 400) is returned, the body will contain a JSON object
that describes the problem. The error object has the following structure:

|===
| Path | Type | Description

| `timestamp` | String | The requestâ€™s timestamp
| `path` | String | The path that generated the error
| `message` | String | The human readable error message
| `status` | Number | The HTTP status describing the error
| `error` | String | The short message describing the error

|===

For example, a request that attempts to `GET` on the link:#authentication-login[Login API] endpoint will produce a
`405 Method Not Allowed` response.

[[method-not-allowed]]
==== Method Not Allowed

===== Example cURL Request:
include::{snippets}/auth-controller-tests/method-not-allowed/curl-request.adoc[]

===== Example HTTP Request:
include::{snippets}/auth-controller-tests/method-not-allowed/http-request.adoc[]

===== Example HTTP Response:
include::{snippets}/auth-controller-tests/method-not-allowed/http-response.adoc[]


[[auth]]
== Authentication & Authorization
include::authController.adoc[]

[[resources]]
== Resources

[[resource-role]]
=== Role
include::roleController.adoc[]

[[resource-user]]
=== User
include::userController.adoc[]

[[resource-location]]
=== Location
include::locationController.adoc[]

[[resource-event-field]]
=== Event Field
include::eventFieldController.adoc[]

[[resource-event-template]]
=== Event Template
include::eventTemplateController.adoc[]

[[resource-config-field]]
=== Config Field
include::configFieldController.adoc[]

[[resource-template]]
=== Template
include::templateController.adoc[]

[[resource-cdi]]
=== Cloud Device Interface
include::cloudDeviceInterfaceController.adoc[]

[[resource-fhd]]
=== Field Hardware Device
include::fieldHardwareDeviceController.adoc[]

[[resource-module]]
=== Module
include::moduleController.adoc[]

[[misc]]
== Miscellaneous

[[misc-api-key]]
=== API Key
include::apiKeyDetailController.adoc[]

[[misc-enum]]
=== Enum APIs
include::enumController.adoc[]

[[misc-data-sync]]
=== Data Sync APIs
include::dataSyncController.adoc[]

[[misc-util]]
=== Utility APIs
include::utilController.adoc[]